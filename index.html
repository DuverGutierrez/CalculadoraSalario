<!DOCTYPE html>
<html xmlns="https://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<title>CRUD SPRING BOOT</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">

</head>
<body>
<div class="card">
<div class="card-body">

	<div class="input-group input-group-sm mb-3">
		<a class="btn btn-success" th:href="@{/new}">Agregar Nuevo</a>
	</div>

	<div class="col-8">
		<table class="table table-striped table-hover col-6" style="border:solid 1px gray">
			<tr>
				<th>#</th>
				<th>Nombres</th>
				<th>Apellidos</th>
				<th>Identificacion</th>
				<th>fecha nacimiento</th>
				<th></th>
			</tr>
			<tr th:each="p:${cliente}">
				<td th:text="${p.id}"></td>
				<td th:text="${p.nombres}"></td>
				<td th:text="${p.apellidos}"></td>
				<td th:text="${p.cc}"></td>
				<td th:text="${p.f_nacimiento}"></td>
				<td>
					<a class="btn btn-danger" th:onclick="eliminar([[${p.id}]])" href="#">Eliminar</a>
					<a class="btn btn-primary" th:href="@{/listar/}+${p.id}">Editar</a>
				</td>
			</tr>
		</table>
	</div>
</div>
</div>

<script src="https://code.jquery.com/jquery-3.4.1.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script	src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="static/funciones.js"></script>
<script src="../static/funciones.js" type="text/javascript"></script>

<script type="text/javascript">
function eliminar(id) {
	console.log(id);
	Swal.fire({
		title: "Esta seguro de Eliminar?",
		text: "Una vez eliminado no se podra restablecer!",
		icon: 'warning',
		showCancelButton: true,
		confirmButtonColor: '#1a904f',
		cancelButtonText: 'Cancelar',
		cancelButtonColor: 'red',
		confirmButtonText: 'Confirmar'

	}).then((OK) => {
		if (OK.isConfirmed == true) {
			$.ajax({
				url:"/delete/"+id,
				success: function(res) {
					console.log(res);
				},
			});
			Swal.fire({
				title: "Transaccion exitosa!",
						text: "El registro ha sido eliminado",
						icon: 'success',
						showCancelButton: false,
						confirmButtonColor: '#1a904f',
						confirmButtonText: 'Aceptar'
			}).then((ok)=>{
				if(ok){
					location.href="/listar";
				}
			});
		}
	});
}

function ddd (num){
	var data = {
		id: 0,
		nombres: "aaaaaa",
		apellidos: "bbbbbb",
		f_nacimiento: "1111",
		cc: "vvvv"
	}

	$.post("/save1", data).done(function (response){
		if (response == true){
			location.href="/listar";
		}
		else {
			location.href="/new";
		}
	}).fail();
}

function zzz (num){

	var cliente1 = {
		id: 0,
		nombres: "aaaaaa",
		apellidos: "bbbbbb",
		f_nacimiento: "1111",
		cc: "vvvv"
	}
	var cliente = { ...cliente1 }
	var cliente = { nombres: "ddddddd" }
	cliente = JSON.stringify(cliente);
	var data = { cliente };

	$.post("/deletet", data).done(function (response){
		if (response == true){
			location.href="/listar";
		}
		else {
			location.href="/new";
		}
	}).fail();
}

function xxxx(){

	var cliente1 = {
		id: 0,
		nombres: "aaaaaa",
		apellidos: "bbbbbb",
		f_nacimiento: "1111",
		cc: "vvvv"
	}

	var cliente = { ...cliente1 }
	var cliente3 = { nombres: "ddddddd" }
	var data1 = { cliente };

	$.ajax({
		url : '/savero',
		data : { cliente: "fffff"},
		type : 'POST',
		dataType : 'json',
		success : function(json) {
			var CC = 8;
		}
	});
}

function kkk(){

	var cliente = {
		id: 0,
		nombres: "aaaaaa",
		apellidos: "bbbbbb",
		f_nacimiento: "1111",
		cc: "vvvv"
	}

	cliente = (JSON.stringify(cliente)).toString();

	$.ajax({
		url : '/savero3',
		data : {cliente: cliente},
		type : 'POST',
		dataType : 'json',
		success : function(json) {
			var CC = 8;
		}
	});
}
var form;
function bbb(){

	var cliente = new FormData();
	form = cliente;
	cliente.append("id", 0);
	cliente.append("nombres", "xxxxx");
	cliente.append("apellidos", "ooooooo");
	cliente.append("f_nacimiento", "iiiiii");
	cliente.append("cc", "mmmmm");

	$.ajax({
		url : '/savero4',
		data : cliente,
		type : 'POST',
		dataType : 'json',
		success : function(json) {
			var CC = 8;
		}
	});
}

function GuardarMensaje1() {

    $.ajax({
	url: "https://gfc8f6952f1e582-car.adb.us-ashburn-1.oraclecloudapps.com/ords/admin/car/car",
	type: 'GET',
	crossDomain: true,
	dataType: 'jsonp',
	success: function (response) {
	    alert("Success");
	},
	error: function (response) {
	    alert('Failed!');
	},
    });
}

</script>


</body>
</html>
